<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTPS Server - Performance & Security</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>üöÄ HTTPS Server</h1>
            <p>Servidor HTTPS de alta performance desenvolvido em C++ com assembly otimizado e opera√ß√µes SIMD avan√ßadas</p>
        </div>
        
        <div class="features">
            <div class="feature">
                <span class="feature-icon">üîí</span>
                <h3>Seguran√ßa Avan√ßada</h3>
                <p>TLS 1.3, AES-NI assembly, SHA-256 AVX2, UUID v4 com hardware RNG e valida√ß√£o SIMD de entrada</p>
            </div>
            
            <div class="feature">
                <span class="feature-icon">‚ö°</span>
                <h3>Performance Extrema</h3>
                <p>Base64 SIMD, hex encoding vetorizado, HTTP parsing acelerado e opera√ß√µes de rede otimizadas</p>
            </div>
            
            <div class="feature">
                <span class="feature-icon">üõ†Ô∏è</span>
                <h3>Arquitetura Moderna</h3>
                <p>C++17, OpenSSL 3.0, NASM assembly, detec√ß√£o autom√°tica de CPU e APIs RESTful</p>
            </div>
        </div>
        
        <div class="routes-section">
            <h2>üåê Rotas Dispon√≠veis</h2>
            <div class="routes-grid routes-horizontal">
                <a href="/" class="route-card">
                    <div class="route-method">GET</div>
                    <div class="route-path">/</div>
                    <div class="route-desc">P√°gina Principal</div>
                </a>
                
                <a href="/about" class="route-card">
                    <div class="route-method">GET</div>
                    <div class="route-path">/about</div>
                    <div class="route-desc">Informa√ß√µes T√©cnicas</div>
                </a>
                
                <a href="/bench" class="route-card">
                    <div class="route-method">GET</div>
                    <div class="route-path">/bench</div>
                    <div class="route-desc">Benchmarks API</div>
                </a>
                
                <div class="route-card">
                    <div class="route-method post">POST</div>
                    <div class="route-path">/api/echo</div>
                    <div class="route-desc">API Echo JSON</div>
                </div>
                
                <a href="/test.html" class="route-card">
                    <div class="route-method">GET</div>
                    <div class="route-path">/test.html</div>
                    <div class="route-desc">Teste de Arquivo</div>
                </a>
            </div>
        </div>
        
        <div class="api-demo">
            <h3>üì° Teste da API JSON</h3>
            <p>Exemplo de requisi√ß√£o POST para /api/echo:</p>
            <div class="code-block">
curl -k -X POST https://localhost:8443/api/echo \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello World", "timestamp": 1234567890}'
            </div>
            <button class="btn" onclick="testAPI()">Testar API</button>
            <div id="api-result"></div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 HTTPS Server - Desenvolvido por <strong>Thiago Di Faria</strong></p>
            <p>Performance extrema com assembly SIMD otimizado</p>
        </div>
    </footer>
    
    <script>
        async function testAPI() {
            const resultDiv = document.getElementById('api-result');
            resultDiv.innerHTML = '<div style="color: #666; font-style: italic;">Enviando requisi√ß√£o...</div>';
            
            try {
                const response = await fetch('/api/echo', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: "Hello from browser!",
                        timestamp: Math.floor(Date.now() / 1000),
                        user_agent: navigator.userAgent.substring(0, 50) + "..."
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    throw new Error('Resposta n√£o √© JSON v√°lido');
                }
                
                const data = await response.json();
                
                resultDiv.innerHTML = `
                    <div class="code-block">
                        <strong>‚úÖ Response (${response.status}):</strong><br>
                        ${JSON.stringify(data, null, 2)}
                    </div>
                `;
            } catch (error) {
                console.error('Erro na API:', error);
                resultDiv.innerHTML = `
                    <div class="error-message">
                        ‚ùå Erro: ${error.message}
                    </div>
                `;
            }
        }
    </script>
</body>
</html>