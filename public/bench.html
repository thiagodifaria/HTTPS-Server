<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmarks - HTTPS Server</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body class="benchmark-page">
    <div class="container">
        <div class="hero">
            <h1>üèÜ Performance Benchmarks</h1>
            <p>Teste de performance em tempo real dos m√≥dulos assembly otimizados</p>
        </div>
        
        <div class="api-demo">
            <h3>‚ö° Executar Benchmarks</h3>
            <p>Clique para executar testes de performance dos algoritmos criptogr√°ficos:</p>
            <button class="btn" onclick="runBenchmarks()">Executar Benchmarks</button>
            <div id="benchmark-status"></div>
        </div>

        <div class="routes-section">
            <h2>üìä Resultados</h2>
            <div id="benchmark-results">
                <p>Execute os benchmarks para ver os resultados</p>
            </div>
        </div>

        <div class="api-demo">
            <a href="/" class="btn">‚Üê Voltar ao In√≠cio</a>
        </div>
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 HTTPS Server - Desenvolvido por <strong>Thiago Di Faria</strong></p>
            <p>Performance extrema com assembly SIMD otimizado</p>
        </div>
    </footer>
    
    <script>
        async function runBenchmarks() {
            const statusDiv = document.getElementById('benchmark-status');
            const resultsDiv = document.getElementById('benchmark-results');
            
            statusDiv.innerHTML = '<p>Executando benchmarks...</p>';
            resultsDiv.innerHTML = '<p>Processando...</p>';
            
            try {
                const response = await fetch('/api/benchmark', {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                statusDiv.innerHTML = '<p><strong>‚úÖ Benchmarks conclu√≠dos</strong></p>';
                
                resultsDiv.innerHTML = `
                    <div class="routes-grid">
                        <div class="route-card">
                            <div class="route-method">AES</div>
                            <div class="route-path">${data.aes_ni.throughput}</div>
                            <div class="route-desc">Tempo: ${data.aes_ni.time}</div>
                        </div>
                        
                        <div class="route-card">
                            <div class="route-method">SHA</div>
                            <div class="route-path">${data.sha256.throughput}</div>
                            <div class="route-desc">Tempo: ${data.sha256.time}</div>
                        </div>
                        
                        <div class="route-card">
                            <div class="route-method">P256</div>
                            <div class="route-path">${data.p256.field_ops} ops/s</div>
                            <div class="route-desc">ECDH: ${data.p256.ecdh_est} /s</div>
                        </div>
                    </div>
                    
                    <div class="code-block">
                        <strong>Detalhes Completos:</strong><br>
                        ${JSON.stringify(data, null, 2)}
                    </div>
                `;
            } catch (error) {
                console.error('Erro nos benchmarks:', error);
                statusDiv.innerHTML = `<div class="error-message">‚ùå Erro: ${error.message}</div>`;
                resultsDiv.innerHTML = '<p>Falha na execu√ß√£o dos benchmarks</p>';
            }
        }
    </script>
</body>
</html>